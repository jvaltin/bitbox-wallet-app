sudo: required

language: bash

services:
  - docker

addons:
  apt:
    update: true
    packages:
      - docker-ce
      - make

before_install:
- docker build -t bitbox-wallet .
- docker run bitbox-wallet /bin/bash -c "ls -al /opt/"
- docker run bitbox-wallet /bin/bash -c "find /|grep bitbox-wallet-app"
- docker ps -a

jobs:
  include:
    - stage: docker ci
      script: docker run -it bitbox-wallet /bin/bash -c "make docker-ci"
    - stage: docker ci-fast
      script: docker run -it bitbox-wallet /bin/bash -c "make docker-ci-fast"
    - stage: build linux
      script: docker run -it bitbox-wallet /bin/bash -c "make clean qt-linux"
