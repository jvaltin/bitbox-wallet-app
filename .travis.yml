sudo: required

language: bash

services:
  - docker

addons:
  apt:
    update: true
    packages:
      - docker-ce
      - make

before_install:
- docker build -t bitbox-wallet .
- docker run bitbox-wallet /bin/bash -c "ls -al /opt/"
- docker ps -a

jobs:
  include:
    - stage: build linux
      script: docker run -it bitbox-wallet /bin/bash -c "cat /opt/go/src/github.com/digitalbitbox/bitbox-wallet-app/Makefile"
    - stage: docker ci
      script: docker run -it bitbox-wallet /bin/bash -c "make -C /opt/go/src/github.com/digitalbitbox/bitbox-wallet-app/ docker-ci"
    - stage: docker ci-fast
      script: docker run -it bitbox-wallet /bin/bash -c "make -C /opt/go/src/github.com/digitalbitbox/bitbox-wallet-app/ docker-ci-fast"
